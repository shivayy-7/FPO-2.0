<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ page isELIgnored="false"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt"%>
<%@ taglib prefix="tiles" uri="http://tiles.apache.org/tags-tiles"%>
<c:set var="contextPath" value="${pageContext.request.contextPath}" />

<script src="${contextPath}/assets/vendor/bootstrap-multiselect/bootstrap-multiselect.js"></script>
<script src="${contextPath}/assets/appJs/validation/common-utils.js"></script>
<script src="${contextPath}/assets/appJs/ajaxJs/commonAjax.js"></script>

<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>


<div class="row mt-3">
        <div class="col-md-6"> <h5 class="change-color"> Add Training Information </h5></div>
        <%@ include file="/WEB-INF/views/message.jsp"%>
        <div class="col-md-6"> <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item"><a href="#"> Training Management</a></li>
              <li class="breadcrumb-item active" aria-current="page"> Add Training Information</li>
            </ol>
          </nav></div>
        <div class="col-md-12 ">

          <!-- Rahul Edit -->
          <hr style="margin-top: 5px;" />
          <form action="${contextPath}/training/manageTraining" id="submitForm" method="POST"> 
						<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
						<input type="hidden" name="trainingVO.trainingId" id="pcProfileId" value="${fpoDtls.fpoVo.fpoId}" />
						<input type="hidden" name="trainingVO.trainingCode" value="${fpoDtls.fpoVo.fpoCode}"/>
						<input type="hidden" name="trainingVO.status" id="statusCode" value="${fpoDtls.fpoVo.status}"/>
						
            <div class="row">
              <div class="col-md-12">
                <div class="row align-items-end">

                  <div class="form-group col-md-2">
                    <label for="inputEmail4">Training Type <span style="color:red">*</span> </label>
                    <select class="form-select" id="trainingType" name="trainingVO.trainingType">
                      <option value="0">-Select-</option>
                      <option value="Exposure Visit"> Exposure Visit</option>
                      <option value="Training"> Training</option>
                    </select>
                  </div>
                  <div class="form-group col-md-2">
                    <label for="inputEmail4"> Training Name <span style="color:red">*</span> </label>
                    <input class="form-control form-control-sm" type="text" id="trainingName" name="trainingVO.trainingName">
                  </div>
                  <div class="form-group col-md-2">
                    <label for="inputEmail4">Date of Training<span style="color:red">*</span> </label>
                    <div class="datepicker-box">
                      <input class="datepicker_con form-control form-control-sm" type="text" id="dateOfTraining" name="trainingVO.dateOfTraining">
                    </div>
                  </div>
                  <div class="form-group col-md-2">
                    <label for="inputEmail4">Trainer Name<span style="color:red">*</span> </label>
                    <div class="datepicker-box">
                      <input class="form-control form-control-sm" type="text" id="trainerName" name="trainingVO.trainerName">
                    </div>
                  </div>
                  
                  <div class="form-group col-md-2">
                    <label for="inputEmail4">Number of Days<span style="color:red">*</span> </label>
                    <input class="form-control form-control-sm" type="number" id="noOfDay" name="trainingVO.noOfDay">
                  </div>
                  <div class="form-group col-md-2">
                    <label for="inputEmail4">FIG group<span style="color:red">*</span> </label>
                    <select class="form-select form-control form-control-sm selectpicker" multiple data-live-search="true" id="fpo" name="fpoId" onchange="updateFarmersCount()">
                      <option value="0">-Select-</option>
                      <c:forEach items="${fpoList}" var="fpo">   
                               <option value="${fpo.fpoId}" > ${fpo.fpoName}</option>
                      </c:forEach>
                    </select>
                  </div>
                  <div class="form-group col-md-2">
                    <label for="inputEmail4">Number of Farmers<span style="color:red">*</span> </label>
                    <div class="calanderholder">
                      <input type="text" class="form-control form-control-sm" id="noOfFarmers" name="trainingVO.noOfFarmers" readonly="readonly"/>
                    </div>
                  </div> 
                  <div class="col-md-2 text-start mb-10"><button type="button" class="btn-submit" onclick="submitForm('UPCOMING')">Submit</button></div>
                </div>
              </div>
            </div>
          </form>
          </div>
          </div>
          
<script>
function updateFarmersCount() {
	  var selectedFpos = document.getElementById("fpo").selectedOptions;
	  
	  document.getElementById("noOfFarmers").value = selectedFpos.length;
	}
	
function submitForm(status){
	debugger;
	$("#statusCode").val(status);
	$("#submitForm").submit();
}

</script>